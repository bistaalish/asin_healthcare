{% extends 'basic/base.html' %}

{% block content %}

<div class="container mt-5 col-md-3">
  <h2>Buyer Information Form</h2>
  {% if product %}
    <form action="{% url 'payment_support:create_payment' product.id %}" method="POST" class="mt-4">
    <input type="hidden" name="product_id" value="{{ product.id }}">

  {% else %}
    <form action="{% url 'payment_support:create_allpayment' %}" method="POST" class="mt-4">
    <!-- <input type="hidden" name="product_id" value="0"> -->
  {% endif%}

    {% csrf_token %}
      <div class="form-group">
          <label for="firstName">Buyer's Name:</label>
          <input type="text" class="form-control" id="firstName" name="buyer_name" required>
      </div>
      <div class="form-group">
          <label for="email">Email Address:</label>
          <input type="email" class="form-control" id="email" name="email" required>
      </div>
      <div class="form-group text-center mt-4">
        <label for="product_price">Price:</label>
        {% if product %}
        <span id="product_price">${{ product.price }}</span>
        {% else %}
        <span id="product_price">${{ product_price }}</span>
        {% endif %}
      </div>
      <div class="form-check">
          <input type="checkbox" class="form-check-input" id="termsAndConditions" name="termsAndConditions" required>
          <label class="form-check-label" for="termsAndConditions">I agree to the terms and conditions</label>
      </div>
      <button type="submit" id="submitButton" class="btn btn-primary mt-3" disabled>Buy Now</button>
  </form>
</div>

<script>
  // Add an event listener to the checkbox
  document.getElementById("termsAndConditions").addEventListener("change", function () {
      // Get the submit button
      var submitButton = document.getElementById("submitButton");

      // Enable or disable the submit button based on the checkbox state
      if (this.checked) {
          submitButton.removeAttribute("disabled");
      } else {
          submitButton.setAttribute("disabled", "disabled");
      }
  });
</script>
{% endblock %}